{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/curso.service\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/forms\";\n\nfunction CursoAddComponent_div_8_div_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 19);\n    i0.ɵɵtext(1, \" El nombre debe tener al menos 4 caracteres. \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction CursoAddComponent_div_8_div_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 19);\n    i0.ɵɵtext(1, \"La fecha no puede ser menor que la fecha actual.\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction CursoAddComponent_div_8_option_19_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 20);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const docente_r11 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", docente_r11.id);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate2(\"\", docente_r11.id, \" - \", docente_r11.nombre, \"\");\n  }\n}\n\nfunction CursoAddComponent_div_8_option_24_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 20);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const tema_r12 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", tema_r12.id);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(tema_r12.nombre);\n  }\n}\n\nfunction CursoAddComponent_div_8_div_27_option_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 20);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const material_r14 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", material_r14.id);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(material_r14.titulo);\n  }\n}\n\nfunction CursoAddComponent_div_8_div_27_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 2)(1, \"label\", 21);\n    i0.ɵɵtext(2, \"Material\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"select\", 22);\n    i0.ɵɵtemplate(4, CursoAddComponent_div_8_div_27_option_4_Template, 2, 2, \"option\", 12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"small\", 10);\n    i0.ɵɵtext(6, \"Seleccione un material.\");\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const ctx_r8 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r8.materiales);\n  }\n}\n\nfunction CursoAddComponent_div_8_div_30_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 23);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r9 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r9.successMessage, \" \");\n  }\n}\n\nfunction CursoAddComponent_div_8_div_31_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 24);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r10 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r10.errorMessage, \" \");\n  }\n}\n\nconst _c0 = function (a0, a1) {\n  return {\n    \"valid-input\": a0,\n    \"invalid-input\": a1\n  };\n};\n\nfunction CursoAddComponent_div_8_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r16 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\")(1, \"div\", 2)(2, \"label\", 3);\n    i0.ɵɵtext(3, \"Nombre\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"input\", 4, 5);\n    i0.ɵɵlistener(\"ngModelChange\", function CursoAddComponent_div_8_Template_input_ngModelChange_4_listener($event) {\n      i0.ɵɵrestoreView(_r16);\n      const ctx_r15 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r15.curso.nombre = $event);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(6, CursoAddComponent_div_8_div_6_Template, 2, 0, \"div\", 6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"div\", 2)(8, \"label\", 7);\n    i0.ɵɵtext(9, \"Fecha inicio\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"input\", 8, 9);\n    i0.ɵɵlistener(\"ngModelChange\", function CursoAddComponent_div_8_Template_input_ngModelChange_10_listener($event) {\n      i0.ɵɵrestoreView(_r16);\n      const ctx_r17 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r17.curso.fechaInicio = $event);\n    })(\"change\", function CursoAddComponent_div_8_Template_input_change_10_listener() {\n      i0.ɵɵrestoreView(_r16);\n      const ctx_r18 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r18.validateFechaInicio());\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"small\", 10);\n    i0.ɵɵtext(13, \"Seleccione una fecha desde el calendario, caso contrario se cargara con la fecha de hoy.\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(14, CursoAddComponent_div_8_div_14_Template, 2, 0, \"div\", 6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(15, \"div\", 2)(16, \"label\", 3);\n    i0.ɵɵtext(17, \"Docente\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(18, \"select\", 11);\n    i0.ɵɵlistener(\"ngModelChange\", function CursoAddComponent_div_8_Template_select_ngModelChange_18_listener($event) {\n      i0.ɵɵrestoreView(_r16);\n      const ctx_r19 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r19.curso.idDocente = $event);\n    });\n    i0.ɵɵtemplate(19, CursoAddComponent_div_8_option_19_Template, 2, 3, \"option\", 12);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(20, \"div\", 2)(21, \"label\", 13);\n    i0.ɵɵtext(22, \"Tema\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(23, \"select\", 14);\n    i0.ɵɵlistener(\"ngModelChange\", function CursoAddComponent_div_8_Template_select_ngModelChange_23_listener($event) {\n      i0.ɵɵrestoreView(_r16);\n      const ctx_r20 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r20.selectedCursoId = $event);\n    })(\"change\", function CursoAddComponent_div_8_Template_select_change_23_listener() {\n      i0.ɵɵrestoreView(_r16);\n      const ctx_r21 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r21.onCursoSelect());\n    });\n    i0.ɵɵtemplate(24, CursoAddComponent_div_8_option_24_Template, 2, 2, \"option\", 12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(25, \"small\", 10);\n    i0.ɵɵtext(26, \"Seleccione el tema del curso.\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtemplate(27, CursoAddComponent_div_8_div_27_Template, 7, 1, \"div\", 15);\n    i0.ɵɵelementStart(28, \"button\", 16);\n    i0.ɵɵlistener(\"click\", function CursoAddComponent_div_8_Template_button_click_28_listener() {\n      i0.ɵɵrestoreView(_r16);\n      const ctx_r22 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r22.saveCurso());\n    });\n    i0.ɵɵtext(29, \" Guardar\\n\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(30, CursoAddComponent_div_8_div_30_Template, 2, 1, \"div\", 17);\n    i0.ɵɵtemplate(31, CursoAddComponent_div_8_div_31_Template, 2, 1, \"div\", 18);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const _r2 = i0.ɵɵreference(5);\n\n    const _r4 = i0.ɵɵreference(11);\n\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngModel\", ctx_r0.curso.nombre)(\"ngClass\", i0.ɵɵpureFunction2(13, _c0, _r2.value && _r2.value.length >= 4, _r2.value && _r2.value.length < 4));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", _r2.value && _r2.value.length < 4);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngModel\", ctx_r0.curso.fechaInicio);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.fechaInicioInvalid);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngModel\", ctx_r0.curso.idDocente);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.docentes);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngModel\", ctx_r0.selectedCursoId);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.temas);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.selectedCursoId !== null);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"disabled\", !ctx_r0.curso.nombre || ctx_r0.curso.nombre.length < 4 || !ctx_r0.curso.fechaInicio || _r4.value == \"dd/mm/aaaa\" || !ctx_r0.curso.idDocente || !(ctx_r0.curso.tema == null ? null : ctx_r0.curso.tema.id));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.successMessage);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.errorMessage);\n  }\n}\n\nfunction CursoAddComponent_div_9_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r24 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\")(1, \"h4\");\n    i0.ɵɵtext(2, \"Curso fue guardado exitosamente!\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"button\", 25);\n    i0.ɵɵlistener(\"click\", function CursoAddComponent_div_9_Template_button_click_3_listener() {\n      i0.ɵɵrestoreView(_r24);\n      const ctx_r23 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r23.newCurso());\n    });\n    i0.ɵɵtext(4, \"Agregar Nuevo\");\n    i0.ɵɵelementEnd()();\n  }\n}\n\nexport let CursoAddComponent = /*#__PURE__*/(() => {\n  class CursoAddComponent {\n    constructor(cursoService) {\n      this.cursoService = cursoService;\n      this.curso = {\n        nombre: '',\n        fechaInicio: new Date(),\n        idDocente: 1,\n        tema: {\n          id: 2 //campo obligatorio\n\n        }\n      };\n      this.temas = [];\n      this.materiales = [];\n      this.selectedCursoId = null;\n      this.submitted = false; //hardore --> eliminado\n      // temas: any[] = [];\n\n      /*   temas = [{\r\n          \"id\": 1,\r\n          \"nombre\": \"Programación en C++\",\r\n          \"duracion\": 12\r\n        },\r\n        {\r\n          \"id\": 2,\r\n          \"nombre\": \"Diseño de Sistemas\",\r\n          \"duracion\": 36 }];*/\n\n      this.docentes = [{\n        id: 1,\n        nombre: 'Sergio Viera'\n      }, {\n        id: 2,\n        nombre: 'Santiago Raggazzo'\n      }, {\n        id: 3,\n        nombre: 'Marcelo Badino'\n      }];\n      this.successMessage = '';\n      this.errorMessage = '';\n      this.fechaInicioInvalid = false;\n    }\n\n    ngOnInit() {\n      this.getTemas();\n    }\n\n    saveCurso() {\n      const data = {\n        \"id\": this.curso.id,\n        \"nombre\": this.curso.nombre,\n        \"fechaInicio\": this.curso.fechaInicio,\n        \"idDocente\": this.curso.idDocente,\n        \"tema\": this.curso.tema\n      };\n      this.cursoService.create(data).subscribe({\n        next: res => {\n          console.log(res);\n          this.submitted = true;\n        },\n        error: e => {\n          console.error('Error al guardar el curso', Error);\n          this.errorMessage = 'Error al guardar el curso - Verifique los datos ingresados';\n        }\n      });\n    }\n\n    newCurso() {\n      this.submitted = false;\n      this.curso = {\n        nombre: '',\n        fechaInicio: new Date(),\n        idDocente: 1,\n        tema: {\n          id: 2 //campo obligatorio\n\n        }\n      };\n    } //traigo los temas de la base  \n\n\n    getTemas() {\n      this.cursoService.getTemasAll().subscribe({\n        next: data => {\n          this.temas = data;\n          console.log(this.temas);\n        },\n        error: e => console.error(e)\n      });\n    }\n\n    onCursoSelect() {\n      if (this.selectedCursoId !== null) {\n        this.cursoService.getMaterialesPorCurso(this.selectedCursoId).subscribe(materiales => {\n          this.materiales = materiales;\n        });\n      } else {\n        this.materiales = [];\n      }\n    }\n\n    validateFechaInicio() {\n      if (this.curso.fechaInicio) {\n        const fechaIngresada = new Date(this.curso.fechaInicio);\n        const fechaActual = new Date();\n\n        if (fechaIngresada < fechaActual) {\n          this.fechaInicioInvalid = true;\n        } else {\n          this.fechaInicioInvalid = false;\n        }\n      } else {}\n    }\n\n  }\n\n  CursoAddComponent.ɵfac = function CursoAddComponent_Factory(t) {\n    return new (t || CursoAddComponent)(i0.ɵɵdirectiveInject(i1.CursoService));\n  };\n\n  CursoAddComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: CursoAddComponent,\n    selectors: [[\"app-curso-add\"]],\n    decls: 10,\n    vars: 2,\n    consts: [[1, \"submit-form\"], [4, \"ngIf\"], [1, \"form-group\"], [\"for\", \"title\"], [\"type\", \"text\", \"id\", \"title\", \"required\", \"\", \"name\", \"title\", 1, \"form-control\", 3, \"ngModel\", \"ngClass\", \"ngModelChange\"], [\"nombreInput\", \"\"], [\"class\", \"text-danger\", 4, \"ngIf\"], [\"for\", \"date_range\"], [\"type\", \"date\", \"id\", \"date_range\", \"required\", \"\", \"name\", \"date_range\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\", \"change\"], [\"fechaInicioInput\", \"\"], [1, \"form-text\", \"text-muted\"], [\"id\", \"title\", \"required\", \"\", \"name\", \"title\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [\"for\", \"tema\"], [\"id\", \"tema\", \"name\", \"tema\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\", \"change\"], [\"class\", \"form-group\", 4, \"ngIf\"], [1, \"btn\", \"btn-success\", 3, \"disabled\", \"click\"], [\"class\", \"alert alert-success\", 4, \"ngIf\"], [\"class\", \"alert alert-danger\", 4, \"ngIf\"], [1, \"text-danger\"], [3, \"value\"], [\"for\", \"material\"], [\"id\", \"material\", \"name\", \"material\", 1, \"form-control\"], [1, \"alert\", \"alert-success\"], [1, \"alert\", \"alert-danger\"], [1, \"btn\", \"btn-success\", 3, \"click\"]],\n    template: function CursoAddComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"html\")(1, \"body\")(2, \"h1\");\n        i0.ɵɵtext(3, \"Agregar Curso\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(4, \"p\");\n        i0.ɵɵtext(5, \"Ingrese los datos del nuevo curso.\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(6, \"div\")(7, \"div\", 0);\n        i0.ɵɵtemplate(8, CursoAddComponent_div_8_Template, 32, 16, \"div\", 1);\n        i0.ɵɵtemplate(9, CursoAddComponent_div_9_Template, 5, 0, \"div\", 1);\n        i0.ɵɵelementEnd()();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(8);\n        i0.ɵɵproperty(\"ngIf\", !ctx.submitted);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.submitted);\n      }\n    },\n    dependencies: [i2.NgClass, i2.NgForOf, i2.NgIf, i3.NgSelectOption, i3.ɵNgSelectMultipleOption, i3.DefaultValueAccessor, i3.SelectControlValueAccessor, i3.NgControlStatus, i3.RequiredValidator, i3.NgModel],\n    styles: [\".valid-input[_ngcontent-%COMP%]{background-color:#c8f7c5}.invalid-input[_ngcontent-%COMP%]{background-color:#ffb2b2}\"]\n  });\n  return CursoAddComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}